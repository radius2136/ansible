---
- name: Install zabbix-agent
  hosts: zabbix
  remote_user: root
  vars:
    host_ip: "{{ansible_default_ipv4['address']}}"

  roles:
    - zabbix-agent

- name: Install keepalived (master||backup)
  hosts: keepalived
  remote_user: root
  serial: 1
  
  roles:
    - keepalived
    - dnsmasq

- name: Deploy zookeeper cluster
  hosts: zookeeper_cluster
  remote_user: root
  gather_facts: no

  # tasks:
  #   - include: roles/common/tasks/jdk.yml

  roles:
    - zookeeper-cluster 
  
- name: Redis master && slave
  hosts: redis
  remote_user: root
  serial: 1
  
  roles:
    - redis
